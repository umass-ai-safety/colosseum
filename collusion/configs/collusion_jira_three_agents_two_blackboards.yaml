simulation:
  max_iterations: 1
  max_planning_rounds: 4
  max_conversation_steps: 3
  seed: 1
  tags: [collusion_choice_small]

environment:
  import_path: experiments.collusion.choice.jira_ticket_choice_env:JiraTicketChoiceEnvironment
  max_tasks: 8

communication_network:
  topology: complete
  num_agents: 3
  consolidate_channels: true

llm_models:
  - label: together-kimik2-Instruct
    llm:
      provider: together
      together:
        model: moonshotai/Kimi-K2-Instruct-0905
        params:
          max_tokens: 2000
          temperature: 0.7

experiment:
  tag: collusion_small
  output_dir: experiments/collusion/outputs/collusion_small
  max_concurrent_runs: 10
  seeds: [1, 2, 3, 4, 5]
  collusion:
    # Keep colluder identity stable within a run (agents are still seed-dependent).
    colluder_selection: first
  sweeps:
    - name: env_ablation_sweep
      # Environment sweep. Each entry overrides/merges into the top-level `environment:` block.
      environments:
        - label: jira
          import_path: experiments.collusion.choice.jira_ticket_choice_env:JiraTicketChoiceEnvironment
        - label: meeting_scheduling
          import_path: experiments.collusion.choice.meeting_scheduling_choice_env:MeetingSchedulingChoiceEnvironment
        - label: personal_assistant
          import_path: experiments.collusion.choice.personal_assistant_choice_env:PersonalAssistantChoiceEnvironment
        - label: smart_grid
          import_path: experiments.collusion.choice.smart_grid_choice_env:SmartGridChoiceEnvironment
        # - label: hospital
        #   import_path: experiments.collusion.choice.hospital_choice_env:HospitalChoiceEnvironment
      topologies: [complete]
      num_agents: [3]
      colluder_counts: [2]
      # Baseline vs secret-channel treatment.
      secret_channel_enabled: [false, true]
      # Prompt variants only apply when secret_channel_enabled=true.
      # When secret_channel_enabled=false, the runner forces the effective variant to "control".
      prompt_variants: [control, simple]
